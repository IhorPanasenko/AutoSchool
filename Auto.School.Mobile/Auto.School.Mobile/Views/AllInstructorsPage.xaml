<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Auto.School.Mobile.Views.AllInstructorsPage"            
             xmlns:resx="clr-namespace:Auto.School.Mobile.Resources.Strings"
             Shell.NavBarIsVisible="True"
             xmlns:viewModels="clr-namespace:Auto.School.Mobile.ViewModels"
             xmlns:views="clr-namespace:Auto.School.Mobile.Views"
             xmlns:extension="clr-namespace:Auto.School.Mobile.Extension">
    <ContentPage.Resources>
        <Style TargetType="ScrollView">
            <Setter Property="BackgroundColor" Value="White" />
        </Style>
        <Style TargetType="Label">
            <Setter Property="TextColor" Value="Black" />
            <Setter Property="FontSize" Value="Small"/>
            <Setter Property="Margin" Value="0,0,0,5" />
            <Setter Property="HorizontalOptions" Value="StartAndExpand"/>
        </Style>
        <Style TargetType="Border">
            <Setter Property="Margin" Value="10,10,10,30" />
            <Setter Property="Padding" Value="5,5,5,15" />
            <Setter Property="BackgroundColor" Value="White" />
        </Style>
        <Style TargetType="Button">
            <Setter Property="BackgroundColor" Value="#3D6DFF" />
            <Setter Property="TextColor" Value="#f4e558" />
            <Setter Property="Margin" Value="0,10,0,0"/>
            <Setter Property="FontSize" Value="Medium"/>
        </Style>
    </ContentPage.Resources>
    <ScrollView>
        <StackLayout>
            <ActivityIndicator IsRunning="{Binding IsLoading}" IsVisible="{Binding IsLoading}" VerticalOptions="CenterAndExpand"/>
            <CollectionView ItemsSource="{Binding Instructors}" x:Name="AllInstructorsCollection">
                <CollectionView.ItemTemplate >
                    <DataTemplate>
                        <StackLayout>
                            <Border>
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="30" />
                                </Border.StrokeShape>
                                <Border.Shadow>
                                    <Shadow Brush="Black" Offset="0,0" Opacity="0.7" Radius="20" />
                                </Border.Shadow>
                                <Grid ColumnSpacing="5" RowSpacing="5">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackLayout Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" Background="White">
                                        <Frame CornerRadius="30" Padding="0" Margin="0" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" MaximumHeightRequest="200" MaximumWidthRequest="200">
                                            <Image Source="{Binding PhotoUrl}" Aspect="AspectFill" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" Margin="0"/>
                                        </Frame>
                                    </StackLayout>
                                    <StackLayout Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2" Padding="10">
                                        <Label Text="{extension:Translate Key=AllInstructors_NotAvailale}" TextColor="Red" FontSize="Medium" IsVisible="{Binding IsNotAvailable}"/>
                                        <Label Text="{Binding FullName, StringFormat='{0}'}" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" FontSize="Medium" FontAttributes="Bold"/>
                                        <StackLayout Orientation="Horizontal" Spacing="0">
                                            <Label Text="{extension:Translate Key=InstructorDetails_Experience}" HorizontalOptions="StartAndExpand"/>
                                            <Label Text="{Binding WorkExperience, StringFormat='{0}'}" HorizontalOptions="EndAndExpand" VerticalOptions="CenterAndExpand"/>
                                        </StackLayout>
                                        <StackLayout Orientation="Horizontal" Spacing="0">
                                            <Label Text="{extension:Translate Key=InstructorDetails_AverageRating}" HorizontalOptions="StartAndExpand"/>
                                            <Label Text="{Binding AverageRaiting, StringFormat='{0:F1}'}" HorizontalOptions="EndAndExpand" VerticalOptions="CenterAndExpand"/>
                                        </StackLayout>
                                        <StackLayout Orientation="Horizontal" Spacing="0">
                                            <Label Text="{extension:Translate Key=InstructorDetails_DrivingCategory}" HorizontalOptions="StartAndExpand"/>
                                            <Label Text="{Binding VehicleCategory, StringFormat='{0}'}" HorizontalOptions="EndAndExpand" VerticalOptions="CenterAndExpand"/>
                                        </StackLayout>
                                        <StackLayout Orientation="Horizontal" Spacing="0">
                                            <Label Text="{extension:Translate Key=InstructorDetails_CarManufactureYear}" HorizontalOptions="StartAndExpand"/>
                                            <Label Text="{Binding Car.Year, StringFormat='{0}'}" HorizontalOptions="EndAndExpand" VerticalOptions="CenterAndExpand"/>
                                        </StackLayout>
                                        <StackLayout Orientation="Horizontal" Spacing="0">
                                            <Label Text="{extension:Translate Key=InstructorDetails_Transmission}"/>
                                            <Label Text="{Binding Car.Transmission, StringFormat='{0}'}" HorizontalOptions="EndAndExpand" VerticalOptions="CenterAndExpand"/>
                                        </StackLayout>
                                        <StackLayout Orientation="Horizontal" Spacing="00">
                                            <Label Text="{extension:Translate Key=InstructorDetails_AverageRatingCar}"/>
                                            <Label Text="{Binding Car.AverageRating, StringFormat='{0:F1}'}"  HorizontalOptions="EndAndExpand" VerticalOptions="CenterAndExpand"/>
                                        </StackLayout>
                                    </StackLayout>
                                    <StackLayout Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2">
                                        <Button 
                                            IsEnabled="{Binding IsAvailable}"
                                            Text="{extension:Translate Key=AllInstructors_DetailsButton}" 
                                            Command="{Binding Path=BindingContext.NavigateToInstructorDetailsCommand, Source={x:Reference AllInstructorsCollection}}" CommandParameter="{Binding .}"
                                            FontAttributes="Bold"
                                            TextColor="White"/>
                                    </StackLayout>
                                </Grid>
                            </Border>
                        </StackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </StackLayout>
    </ScrollView>
</ContentPage>
